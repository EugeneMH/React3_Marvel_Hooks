{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/React-Marvel/src/components/comicsList/ComicsList.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Skeleton from '../skeleton/Skeleton';\nimport Error from '../error/Error';\nimport './comicsList.scss';\nimport useMarvelService from '../../services/service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst setListContent = (process, Component, loadingNewComics, skeleton) => {\n  switch (process) {\n    case 'waiting':\n      return skeleton;\n    case 'loading':\n      return loadingNewComics ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 41\n        }, this), skeleton]\n      }, void 0, true) : skeleton;\n    case 'error':\n      return /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 20\n      }, this);\n    case 'confirmed':\n      return /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 20\n      }, this);\n    default:\n      throw new Error('Unexpected process state');\n  }\n};\nconst ComicsList = () => {\n  _s();\n  const [comicsCapReached, setComicsCap] = useState(false);\n  const [loadingNewComics, setLoadingNewComics] = useState(false);\n  const [comics, setComics] = useState([]);\n  const [offset, setOffset] = useState(10);\n  const {\n    process,\n    setProcess,\n    getAllComics,\n    clearError\n  } = useMarvelService();\n  useEffect(() => {\n    requestComics(offset, true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const requestComics = (offset, initial) => {\n    clearError();\n    initial ? setLoadingNewComics(false) : setLoadingNewComics(true);\n    getAllComics(offset).then(res => {\n      onFinishedLoading(res);\n    }).then(() => setProcess('confirmed'));\n  };\n  const onFinishedLoading = newComics => {\n    let ended = false;\n    if (newComics.length < 8) ended = true;\n    setComics(comics => [...comics, ...newComics]);\n    setOffset(offset => offset + 8);\n    setLoadingNewComics(false);\n    setComicsCap(ended);\n  };\n  const createContent = arrComics => {\n    return arrComics.map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comics__item\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/comics/${item.id}`,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.thumbnail,\n            alt: item.thumbnail,\n            className: \"comics__item-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-name\",\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-price\",\n            children: item.price + '$'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this);\n    });\n  };\n  const createLoading = () => {\n    return [...Array(8)].map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comics__item\",\n        children: /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this);\n    });\n  };\n  const loading = createLoading();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comics__list\",\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"comics__grid\",\n        children: setListContent(process, () => createContent(comics), loadingNewComics, loading)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button button__main button__long\",\n        disabled: loadingNewComics,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inner\",\n          onClick: () => requestComics(offset, false),\n          style: {\n            'display': comicsCapReached ? 'none' : 'block'\n          },\n          children: \"load more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(ComicsList, \"zyUw/KRdicmB+EwsNAqcpsXEL0g=\", false, function () {\n  return [useMarvelService];\n});\n_c = ComicsList;\nexport default ComicsList;\nvar _c;\n$RefreshReg$(_c, \"ComicsList\");","map":{"version":3,"names":["useEffect","useState","Link","Skeleton","Error","useMarvelService","setListContent","process","Component","loadingNewComics","skeleton","ComicsList","comicsCapReached","setComicsCap","setLoadingNewComics","comics","setComics","offset","setOffset","setProcess","getAllComics","clearError","requestComics","initial","then","res","onFinishedLoading","newComics","ended","length","createContent","arrComics","map","item","i","id","thumbnail","name","price","createLoading","Array","loading"],"sources":["/Applications/MAMP/htdocs/React-Marvel/src/components/comicsList/ComicsList.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Skeleton from '../skeleton/Skeleton'\nimport Error from '../error/Error';\nimport './comicsList.scss';\n\nimport useMarvelService from '../../services/service';\n\nconst setListContent = (process, Component, loadingNewComics, skeleton) => {\n    switch (process) {\n        case 'waiting': \n            return skeleton;\n        case 'loading':\n            return loadingNewComics ? <><Component/>{skeleton}</> : skeleton;\n        case 'error':\n            return <Error/>;\n        case 'confirmed':\n            return <Component/>;\n        default: \n            throw new Error('Unexpected process state');\n    }\n}\n\nconst ComicsList = () => {\n\n    const [comicsCapReached, setComicsCap] = useState(false);\n    const [loadingNewComics, setLoadingNewComics] = useState(false);\n    const [comics, setComics] = useState([])\n    const [offset, setOffset] = useState(10)\n\n    const {process, setProcess, getAllComics, clearError} = useMarvelService();\n\n    useEffect(() => {\n        requestComics(offset, true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const requestComics = (offset, initial) => {\n        clearError();\n        initial ? setLoadingNewComics(false) : setLoadingNewComics(true);\n\n        getAllComics(offset)\n        .then(res => {\n            onFinishedLoading(res)})\n        .then(() => setProcess('confirmed'))\n    }\n\n    const onFinishedLoading = (newComics) => {\n        let ended = false;\n        if (newComics.length < 8) ended = true;\n\n        setComics(comics => [...comics, ...newComics]);\n        setOffset(offset => offset + 8);\n        setLoadingNewComics(false);\n        setComicsCap(ended);\n    }\n\n    const createContent = (arrComics) => {\n\n        return arrComics.map((item, i) => {\n            return (\n                <li className=\"comics__item\" key={i}>\n                    <Link to={`/comics/${item.id}`}>\n                        <img src={item.thumbnail} alt={item.thumbnail} className=\"comics__item-img\"/>\n                        <div className=\"comics__item-name\">{item.name}</div>\n                        <div className=\"comics__item-price\">{item.price + '$'}</div>\n                    </Link>\n                </li>\n            )\n        })\n    }\n\n    const createLoading = () => {\n        return [...Array(8)].map((item, i) => {\n            return (\n                <li className=\"comics__item\" key={i}>\n                    <Skeleton/>\n                </li>\n            )\n        })\n    }\n\n    const loading = createLoading();\n    \n    return (\n        <>\n\n            <div className=\"comics__list\">   \n                <ul className=\"comics__grid\">\n                {setListContent(process, () => createContent(comics), loadingNewComics, loading)}\n                </ul>\n                <button className=\"button button__main button__long\" disabled={loadingNewComics}>\n                    <div className=\"inner\" \n                    onClick={() => requestComics(offset, false)}\n                    style={{'display' : comicsCapReached ? 'none' : 'block'}}>load more</div>\n                </button>\n            </div>\n        </>\n    )\n}\n\nexport default ComicsList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}